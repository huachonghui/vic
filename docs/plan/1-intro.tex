% $Id$

\emph{vic/rat}~\cite{MEDIATOOLS} is a media tool that can have interactive
real-time audio/video conference. These tools have been used in many relevant
research projects such as AccessGrid~\cite{ACCESSGRID}, AVATS~\cite{AVATS} and
UltraGrid~\cite{UltraGrid}. Currently, \emph{vic/rat} is supported by AVATS
project~\cite{AVATS}. \emph{vic} supports many video codecs since its initial
development and implements RTP/RTCP protocol~\cite{RTP} over UDP to increase
interoperability. In this year's GSoC project, we would like to implement
congestion control protocols (TFRC and TFWC) over \emph{vic}. 

\subsection{\label{ssec:project_overview}Overview}

Recently, TCP-Friendly Rate-based congestion control protocol, ala
TFRC~\cite{FHPW00}, has been proposed and it is now being standardized by IETF
under DCCP CCID3~\cite{CCID3}. The main advantages of using this protocol are 1)
it can generate smooth and predictable sending rate 2) it can help timely packet
delivery. However, TFRC might be too much aggressive against TCP sources in some
environment or it might be too much unresponsive to generate a useful sending
rate in some other network environment. To solve this issue, a window-based
version of TFRC has been proposed: TCP-Friendly Window-based Congestion Control
(TFWC)~\cite{SH06} and~\cite{CH07}.

\subsection{\label{ssec:motivation}Motivation}

The motivation of implementing congestion control mechanisms over such a
multimedia application (e.g.\emph{vic} or \emph{rat}) is that we can have a good
controllability at the sending/receiving buffer to make the overall end-to-end
packet delay be within a certain level of timing requirements. Considering the
fact that the delay (and delay jitter) is one of the critical parameters that a
user might greatly care, the controlled delay using congestion control mechanism
could bring a significant advantage to those applications.

\subsection{\label{ssec:aims}Aims and Objectives}

The main project aim in this GSoC 2008 is to implement TFR(W)C over \emph{vic}, and it
can be (roughly) sub-categorized with short descriptions as belows:

\begin{enumerate} %% start enumerating

\item \textbf{TFR(W)C}

\begin{itemize}
\item \textsf{sender/receiver} -- protocol implementation
\item \textsf{CC handler} -- generic congestion control function handler
\item \textsf{RTP for TFR(W)C} -- RTP interface with TFR(W)C
\item \textsf{RTP} -- RTP extension
\end{itemize}

\item \textbf{Buffers}
\begin{itemize}
\item \textsf{send buffer (sbuf)} --  maintain send buffer context (e.g., frame
length, number of frames, send time to transmit a frame, and etc.)
\item \textsf{receive buffer (rbuf)} -- de-queue received frames
\end{itemize}

\item \textbf{Codecs}
\begin{itemize}
\item \textsf{video codecs} -- ability to change encoding rates based on the
feedback information from CC mechanisms
\end{itemize}

\item \textbf{Test Modules}
\begin{itemize}
\item \textsf{packet gen} -- dummy packet generator to test TFR(W) protocol
implementation at the initial development stage
\item \textsf{traffic gen} -- traffic generator to evaluate \emph{vic} with CC
mechanisms
\end{itemize}

\end{enumerate} %% end enumerating

Roughly speaking, there are 5 components to be developed in this project: TFRC,
TFWC, Buffers, Codecs, and Test Modules. We discuss some design/development
issues in the following subsections.

\subsubsection{\label{sssec:aim:cc}TFR(W)C Implementation}

We hope that we could nicely re-use TFR(W)C implementation from
UltraGrid~\cite{UltraGrid} and ns-2 version of TFWC~\cite{SH06}, respectively.
Although the base architecture is different from what those codes, we still
think that we can refer much of their codes. However, we still do not have a
concrete idea which part can be re-used or which part cannot.

\subsubsection{\label{sssec:aim:buffers}Buffers}

The packet buffer in the current \emph{vic} implementation~\cite{AVATS} seems to be
primitive stage - i.e., it does not have fine control of the packet buffer
queue.  As we expect CC mechanisms can provide network information (and should
be able to maintain various state variables) to the upper layer (e.g., video
codecs), the extended version of the current packet buffer is necessary. But, it
is currently not decided what kind of context should be maintained in each
buffers (send buffer and receive buffer).

\subsubsection{\label{sssec:aim:codecs}Codecs}

Firstly, we need to find appropriate video codecs that can be used with CC
mechanisms. The ideal codec can be the one which can adapts framing rate on the
fly without re-initializing it. If this is not supported in any of the current
codecs, we could modify them in a number of different ways to reflect the
feedback information from CC mechanisms. Or, we could manipulate Q-factor in
each codec on the fly based on the feedback information. Again, all of these
decision are not made yet.

\subsubsection{\label{sssec:aim:test}Test Modules}

After implementing TFR(W)C protocols, we would be faced with the point where we
need to test our implementation. There are two things involved in this
component: packet generator and traffic generator. The encoders in the current
\emph{vic} can only take YUV, JPEG, DCT, H261, and CellB Frames\footnote{See
\texttt{module.h} under \emph{vic} home directory.}. Therefore, in order to test our CC
implementation, we need to generate packets in one of those video format. Or, we
could simply use pre-recorded video sequences to transmit for the test purpose.
Next, it's necessary to generate traffic in a real network (or a dummy network)
for that purpose.

\subsection{\label{ssec:structure}Structure of the Report}

This report is organized as follows. In order to get an idea on integrating the
congestion control modules in \emph{vic}, we describe the basic working
mechanisms of UltraGrid~\cite{UltraGrid} in Section~\ref{sec:ultragrid}.
Section~\ref{sec:overview} describes the high-level overview of \emph{vic}
architecture and also gives an examples how the still grabber generates packets
over the network. Section~\ref{sec:cc-api} describes our proposed congestion
control APIs and how it could be integrated in \emph{vic}.
Section~\ref{sec:summary} summarized the project milestones and the expected
outcomes.

\newpage

